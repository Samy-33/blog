<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Abstract Symphony</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="application/atom+xml" rel="alternate" href="atom.xml" title="Abstract Symphony">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-clojure.min.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism.min.css">

    <!-- See Features > favicon in README.md -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="assets/favicon/site.webmanifest">
    <link rel="mask-icon" href="assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">


    <!-- Social sharing (Facebook, Twitter, LinkedIn, etc.) -->
    <meta name="title" content="Abstract Symphony">
    <meta name="twitter:title" content="Abstract Symphony">
    <meta property="og:title" content="Abstract Symphony">
    <meta property="og:type" content="website">

    <meta name="description" content="A blog about life, code and philosophy">
    <meta name="twitter:description" content="A blog about life, code and philosophy">
    <meta property="og:description" content="A blog about life, code and philosophy">


    <meta name="twitter:url" content="https://github.com/borkdude/quickblog/index.html">
    <meta property="og:url" content="https://github.com/borkdude/quickblog/index.html">


    <meta name="twitter:card" content="summary">


    <meta name="twitter:creator" content="saak3t">


    <meta name="twitter:site" content="saak3t">

  </head>
  <body>

    <div class="site-header">
      <div class="wrapper">
        <div class="site-nav">
          <a class="page-link" href="archive.html">Archive</a>
          <a class="page-link" href="tags/index.html">Tags</a>
          
	  <a class="page-link" href="atom.xml">
            Feed
          </a>
	  
	  <a class="page-link" href="https://twitter.com/saak3t">
            Twitter
          </a>
	  
	  
	  <a class="page-link" href="https://blog.saketpatel.me">About</a>
	  
        </div>
        <div>
          <h1 class="site-title">
            <a class="page-link" href="index.html">Abstract Symphony</a>
          </h1>
	  <p>A blog about life, code and philosophy</p>
        </div>
      </div>
    </div>

    <div class="wrapper">

      
    <div>
        <h1><a href="quickblog-setup.html">Self hosting personal blog</a></h1>
        <blockquote><p> This post is aimed at a fairly technical audience. It expects familiarity with <em>clojure</em>, <em>babashka</em>, <em>git</em>, <em>github</em>, <em>cloudflare</em> and <em>markdown</em> syntax. </p></blockquote><p><strong>Prerequisites</strong>: Install babashka and git</p><p>As mentioned in my previous <a href='/new-year-2024'>blog</a>, I had a wish to start writing in public for the last couple of years. Mostly to frame my own thoughts in a structured manner and to keep a public record so others can relate or criticize.</p><p>Recently I found the amazing <a href='https://github.com/borkdude/quickblog'>quickblog</a>, that helped me get up and running with my first post within two hours.</p><p>Without wasting any more word, let's get started.</p><h2 id="outline">Outline</h2><p>In this post, we will</p><ul><li>Set up a blog repository using quickblog</li><li>Host it on github</li><li>Write a github action config to generate static files on push to <code>main</code> branch</li><li>Set up a CD pipeline on cloudflare to deploy the blog</li><li>Point a custom domain to the blog site</li></ul><h2 id="what&#95;is&#95;quickblog?">What is quickblog?</h2><p>Quickblog is a light-weight static blog engine for clojure and babashka. It allows you to write your posts in markdown, provides live reloading and generates SEO optimized static files.</p><h2 id="setting&#95;up&#95;quickblog">Setting up quickblog</h2><p>Create a directory that'll hold your blogging engine and blog posts. I will call it <code>blog</code>. Inside <code>blog</code> directory, create a <code>bb.edn</code> file. The structure looks like the following:</p><pre><code class="lang-sh">➜ tree blog 
blog
└── bb.edn

1 directory, 1 file
</code></pre><p>Let's add <em>quickblog</em> as a dependency in our <code>deps.edn</code>.</p><pre><code class="lang-edn">;; deps.edn
{:deps {io.github.borkdude/quickblog {:git/tag &quot;v0.3.6&quot;
                                      :git/sha &quot;d00e14b1176416b7d7b88e6608b6975888208355&quot;}}}}
</code></pre><p>Replace the <code>:git/tag</code> and <code>:git/sha</code> with the latest ones in <a href='https://github.com/borkdude/quickblog'>quickblog repository</a>.</p><p>Now we will add a babashka task that hooks into <code>quickblog</code> api and exposes it as a command line tool.</p><pre><code class="lang-edn">{:deps {...} ;; folded deps map

 :tasks
 {:requires &#40;&#91;quickblog.cli :as cli&#93;&#41;
  :init &#40;def opts {:blog-title &quot;&lt;Your Blog Title&gt;&quot;
                   :blog-description &quot;&lt;Short Blog Description&gt;&quot;
                   :about-link &quot;&lt;Your Website Link&gt;&quot;
                   :twitter-handle &quot;&lt;Twitter Handle&gt;&quot;}&#41;
  quickblog {:doc &quot;Start blogging quickly! Run `bb quickblog help` for details.&quot;
             :task &#40;cli/dispatch opts&#41;}}}
</code></pre><p>Replace all the options, with your own.</p><p>Execute <code>bb quickblog help</code>, it should print a detailed help text about using quickblog.</p><h2 id="first&#95;blog&#95;post">First blog post</h2><p>Now that we have quickblog setup, we will generate our first post. Quickblog command line has a <code>new</code> subcommand that allows us to do just that.</p><pre><code class="lang-sh">bb quickblog new --file my-first-blog-post.md --title &quot;My first blog post&quot;
</code></pre><p>The directory structure after the last command should look like the following<pre><code class="lang-sh">➜  blog tree .
.
├── bb.edn
└── posts
    └── my-first-blog-post.md

2 directories, 2 files
</code></pre></p><p>Run a live reloading server using <code>bb quickblog watch</code>, it spins up a http server on <code>localhost:1888</code> by default.</p><p>Write your blog post, initialize the <code>blog</code> directory as a git repository and commit your markdown changes. You would also want to add a <code>.gitignore</code> file that excludes some directories from committing like <code>.work</code>, <code>.lsp</code> and <code>.clj-kondo</code>. We will also exclude the <code>public</code> directory from the commit to keep the main branch clean.</p><h2 id="setting&#95;up&#95;github&#95;action">Setting up github action</h2><p>Via github action, we will</p><ul><li>Switch to <code>deploy</code> branch</li><li>Generate the static files</li><li>Commit and push them to the repository</li></ul><p>For this, we will need to allow github actions <code>write</code> permissions on the repository.</p><p>In your repository, go to the <strong>Settings > Actions > General</strong>. In the <code>Workflow permissions</code> select <strong>Read and write permissions</strong> for now. Later, you can spericy more granular permissions <a href='https://docs.github.com/actions/reference/authentication-in-a-workflow#modifying-the-permissions-for-the-github_token'>documented here</a>.</p><p>Create the github action config file: <code>.github/workflows/deploy.yml</code>.<pre><code class="lang-yml">on:
  push:
    branches:
      - main
env:
  TZ: Asia/Kolkata # Replace this with your time zone

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: git config
        run: |
          git config --global user.email &quot;&lt;Github Email&gt;&quot;
          git config --global user.name &quot;&lt;Github Username&gt;&quot;
      - name: Switch to deploy branch
        uses: actions/checkout@v4
        with:
          ref: deploy
          fetch-depth: 0
      - name: Merge main into deploy
        run: git merge origin/main
      - name: Setup babashka
        uses: just-sultanov/setup-babashka@v2
        with:
          version: 1.3.186 # Update this babashka version to latest
      - name: clean
        run: bb quickblog clean
      - name: build
        run: bb quickblog render
      - name: git
        run: |
          export CURRENT&#95;TIME=$&#40;date&#41;
          git add public
          git commit -m &quot;deploy @ ${CURRENT&#95;TIME}&quot;
          git push origin -u deploy
</code></pre></p><p>Replace the placeholders for github email and username, and other parameters. Apart from that the file should be self explanatory.</p><p>We will keep it in our local for now, and push it later to github.</p><h2 id="setting&#95;up&#95;cloudflare">Setting up cloudflare</h2><p>Create a new cloudflare account if you don't have it already. Log in to the account and go to <strong>Workers & Pages</strong> in the left panel.</p><ul><li>We will <em>create an application</em></li><li>Go to <strong>Pages</strong> tab.</li><li>And <strong>Connect to Git</strong></li></ul><p>A modal pops up, where you select your Github account and the repository to connect. You'll be redirected to github. Allow access to just the <code>blog</code> repository and continue.</p><p>Now we go to the next step, add the project name and set the <code>Production branch</code> to <strong>deploy</strong> and <code>Build output directory</code> to <strong>public</strong>. <em>Click and deploy</em>.</p><p>Cloudflare will consider changes on all the branches other than the <code>Production branch</code>, that we set in the previous step, as preview branches. This means that changes on these other branches will also trigger a build, consuming our precious build quota.</p><p>To disable the preview branches, we will go to the project we just setup <strong>-> Settings tab -> Build & deployment -> Configure preview deployments -> None -> Save</strong>. We are done with the setting up our cloudflare page. It should be visible at <code>&lt;project-identifier&gt;.pages.dev</code>.</p><blockquote><p> <strong>Note</strong>: Create the main and deploy branches and push them to our github repository. This will trigger github action build, after which cloudflare page build and you should see you first blog up on the url mentioned above. </p></blockquote><h2 id="setting&#95;up&#95;custom&#95;domain">Setting up custom domain</h2><p>Here I am assuming that you already have a domain bought and configured on cloudflare. If you don't, then there are a couple of platforms that I use to find and get best offer for domains:</p><ul><li><a href='https://www.namecheap.com/'>Namecheap</a></li><li><a href='https://www.godaddy.com/'>GoDaddy</a></li><li><a href='https://www.bigrock.in'>BigRock</a></li><li><a href='https://www.hostinger.in/domain-name-search'>Hostinger</a></li></ul><p>Once you get a domain, transfer it to cloudflare by following <a href='https://developers.cloudflare.com/registrar/get-started/transfer-domain-to-cloudflare/'>these steps</a>.</p><p>Setting up a custom domain for your page is simple. Open our page project, and go to <strong>Custom domains</strong> tab. Click on <strong>Set up a custom domain</strong> and follow the steps.</p><blockquote><p> <strong>PS</strong>: There are multiple ways to host your blog, and probably most of them would be simpler than this setup. It was my first time setting up my blog, and can certainly be improved. Will post an update when I migrate to a better pipeline. A similar post: <a href='https://www.eknert.com/blog/quickblog'>Quickblog by Anders Means Different</a> </p></blockquote><blockquote><p> If you find an error or have a question, open an <a href='https://github.com/Samy-33/blog/issues/new'>issue</a>. </p></blockquote>
        
        
        <p><i>Published: 2024-01-10</i></p>
        
            <p><i>
                Tagged:
                
                    <span class="tag">
                        <a href="tags/tools.html">tools</a>
                    </span>
                
                    <span class="tag">
                        <a href="tags/clojure.html">clojure</a>
                    </span>
                
                    <span class="tag">
                        <a href="tags/blog.html">blog</a>
                    </span>
                
                    <span class="tag">
                        <a href="tags/babashka.html">babashka</a>
                    </span>
                
            </i></p>
        
    </div>

    <div>
        <h1><a href="new-year-2024.html">New year 2024: Beginning</a></h1>
        <p>Welcome to <strong>Abstract Symphony</strong>, fellow humans.</p><p>First off, a very happy new year. May you find love, happiness and joy this year.</p><h2 id="wedding">Wedding</h2><p>2023, for me, was life changing. In a good way. I got married to my beautiful wife, spent more time with family (thanks to my new job at <a href='https://oliv.ai'>Oliv</a>), read a lot of books and healed from the wounds of the past. I can not be grateful enough for this phase of my life.</p><p><img src="./assets/wedding.jpeg" alt="Wedding" width="100%" /></p><p>The wedding brought my family closer. It was tiring to the core to the whole family, but enjoyable nonetheless. I usually stay away from the crowd and excess stimuli but bent these boundaries for the family, and it turned out fine. Like all the things in nature, the excitement and joy came back to the normal levels. Now, there are photos and videos of these moments, that we will cherish for the next several years.</p><h2 id="new&#95;job&#95;at&#95;oliv">New Job at Oliv</h2><p>I have an itch of experimenting and reading about what I don't know, specifically in the tech industry. For the last couple of years, I wanted to read and learn about <a href='https://clojure.org/'>clojure</a> - a dynamic, functional and lisp flavoured programming language. The idea of REPLs fascinated me from the very first moment I read about them. So, I went ahead and tried to build a project with it. I failed miserably, it was hard to alter my thinking to align with the principles that clojure stood for.</p><p>Later when <a href='https://www.linkedin.com/in/dvdreddy/'>dvd</a> contacted me about joining Oliv in the mid 2023, I couldn't say no. One of the reasons was <em>clojure</em> based tech stack at Oliv.</p><p>I hopped on the clojure journey and haven't looked back. I've come to love clojure due to following reasons:</p><ul><li>REPL driven development</li><li>Relatively small and growth driven community</li><li>Open source orientation</li><li>Down to earth moderators and builders</li></ul><p>There are probably more, that I don't recall right now. Join the Official <a href='https://join.slack.com/t/clojurians/shared_invite/zt-29tr0sxes-m26dRDptHFQSdVULhDALgQ'>Clojurians Slack</a> if you're interested.</p><h2 id="books">Books</h2><p>Reading, as a habit, began when I faced an identity crisis during my undergraduate studies. I was looking for improving myself, probably due to self-esteem issues. Since then, I have been continuously reading psychology, philosophy and self-help non-fiction. At a point of time, I was just reading the books and nothing else.</p><p>2023 was a moderate reading year. I bought 20+ books, finished 1 and still reading 4-5 books at a time. It's become a hobby more than anything now. Reading is a stress releaver now.</p><p>Following is a list of the books I read in 2023.</p><ul><li><strong>Courage to be disliked</strong>: A paradigm shift is rare, and this book did it in a way that hit close to home. It has a dialog based writing style and I could see myself in one of the two main characters. A beginner friendly introduction to Adlerian Psychology, that promotes the idea that all the problems we face are interpersonal relationship problems. We can solve these problems by helping others and seeing them as our comrades.</li><li><strong>The beginning of infinity</strong>: In my teenage and college years, I was fascinated as well as troubled by the fundamental questions about universe and our existence and the lack of answers. This book doesn't answer these answers but gives few more perspectives for us to think about. Loved every chapter.</li><li><strong>Goal: A Process of Ongoing Improvement</strong>: This book gives an idea about how to prioritise our work and what goals should we strive for in our work.</li><li><strong>Designing data intensive application</strong>: Well, what can I say except "read this instead of taking those system design preparation courses". An enjoyable read about how large systems work and their most fundamental pieces.</li><li><strong>Atomic Habits</strong>: Science and psychology based habit building. James Clear, the author, makes it an enjoyable read by adding short stories about small algorithms we can implement to build good and destroy bad habits.</li></ul><p>It is not an exhaustive list of the books I read in 2023. The above is the ones that I found most interesting and would recommend everyone to read.</p><h2 id="writing">Writing</h2><p>I came across a few people in last few years that have inspired me to write. And I believe writing helps me arrange and sharpen my thoughts. Having a brain that is susceptible to distraction poses a different set of problems to the quality of the conversations and thoughts.</p><p>I wanted to start writing but before that I needed to build a blogging platform with a great design and implementation in <code>clojure</code>. Unfortunately, I always procrastinated building it as I was less experienced and I didn't want to realise that I don't have enough knowledge about it either.</p><p>Late in 2023, I was going through the mighty <a href='https://github.com/borkdude'>borkdude's</a> socials and found the <a href='https://github.com/borkdude/quickblog'>quickblog</a>, a light-weight static blog engine for Clojure and babashka. It got me started within a minute, and I am grateful for this product. Thanks Michiel.</p><h2 id="goals&#95;for&#95;2024">Goals for 2024</h2><p>I am not one of those people who chooses new year resolutions at the beginning of the year and as it passes, forgets about them. I forget about them - right away.</p><p>On a high level, I want to work on my family and help them reach a place where they could focus on what's important (Story about this sometime later). Focus on my marriage and get the fundamentals right in terms of our plans and family. I would also like to improve and be cosistent in writing on this blog and reading the books that I couldn't finish in 2023.</p><p>These are the most important ones and I look forward to and wish you all have, a great new year.</p><h2 id="quote&#95;for&#95;the&#95;post">Quote for the post</h2><blockquote><p> God give me serenity to accepts things I can not change, the courage to change that I can and wisdom to know the difference. </p></blockquote>
        
        
        <p><i>Published: 2024-01-01</i></p>
        
            <p><i>
                Tagged:
                
                    <span class="tag">
                        <a href="tags/life-update.html">life-update</a>
                    </span>
                
            </i></p>
        
    </div>



      
      <div style="margin-bottom: 20px; float: right;">
        <a class="page-link" href="archive.html">Archive</a>
      </div>
      
    </div>
  </body>
</html>
